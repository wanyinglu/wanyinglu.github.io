<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"角角向前冲"大闯关</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 基础样式保持不变... */
        
        /* 针对Scratch创世界的特殊样式调整 */
        #game-container {
            position: relative;
            width: 485px;
            height: 402px;
            margin: 0 auto;
        }
        
        #game-iframe {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        /* 全屏模式专用样式 */
        .fullscreen #game-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: white;
        }
        
        .fullscreen #game-iframe {
            width: 100%;
            height: 100%;
            border-radius: 0;
        }
        
        /* 游戏指南模态框样式 */
        #guide-modal {
            display: none;
            position: fixed;
            /* 其他样式保持不变 */
        }
    </style>
</head>
<body>
    <!-- 其他页面内容保持不变... -->
    
    <!-- 专门针对Scratch创世界优化的游戏容器 -->
    <div id="game-container">
        <iframe id="game-iframe"
               src="https://www.scratch-cw.top/projects/4347/embed"
               allowfullscreen
               scrolling="no"
               frameborder="0"
               width="485"
               height="402"></iframe>
    </div>
    
    <!-- 游戏指南模态框 -->
    <div id="guide-modal">
        <!-- 内容保持不变 -->
    </div>

    <script>
        // 针对Scratch创世界的优化代码
        document.addEventListener('DOMContentLoaded', function() {
            // 游戏指南功能
            const guideBtn = document.getElementById('guide-btn');
            const guideModal = document.getElementById('guide-modal');
            const closeBtn = document.querySelector('.close-modal');
            
            function toggleGuide() {
                guideModal.style.display = guideModal.style.display === 'block' ? 'none' : 'block';
                document.body.style.overflow = guideModal.style.display === 'block' ? 'hidden' : 'auto';
            }
            
            guideBtn.addEventListener('click', function(e) {
                e.preventDefault();
                toggleGuide();
            });
            
            closeBtn.addEventListener('click', toggleGuide);
            
            // 全屏功能处理
            const gameContainer = document.getElementById('game-container');
            
            window.addEventListener('message', function(e) {
                // 确保消息来自我们的iframe
                if (e.source !== document.getElementById('game-iframe').contentWindow) return;
                
                if (e.data === 'ScratchEmbedSetFullScreen') {
                    document.body.classList.add('fullscreen');
                } else if (e.data === 'ScratchEmbedSetExitFullScreen') {
                    document.body.classList.remove('fullscreen');
                }
            });
            
            // 处理Scratch资源加载错误
            window.addEventListener('error', function(e) {
                if (e.target.tagName === 'IMG' || e.target.tagName === 'SCRIPT') {
                    console.warn('资源加载失败:', e.target.src);
                    // 这里可以添加备用资源加载逻辑
                }
            }, true);
        });
    </script>
</body>
</html>
